<!DOCTYPE html>
<html lang="en" dir="ltr">

<head>
  <meta charset="utf-8">
  <title>Book Notes</title>
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.6.3/css/all.css"
    integrity="sha384-UHRtZLI+pbxtHCWp1t77Bi1L4ZtiqrqD80Kn4Z8NTSRyMA2Fd33n5dQ8lWUE00s/" crossorigin="anonymous">
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/css/bootstrap.min.css"
    integrity="sha384-GJzZqFGwb1QTTN6wy59ffF1BuGJpLSa9DkKMp0DgiMDm4iYMj70gZWKYbI706tWS" crossorigin="anonymous">
  <link rel="stylesheet" href="/css/home.css">
</head>
<style>

</style>

<body>
  <header>
    <div class="container myheader mt-2 mb-2 p-2">
      <div class="row d-flex align-items-center">
        <div class="col-10">
          <h1>Book Notes<img src="/images/Book-Logo.png" class="logo ml-2" width="40px" height="40px" alt="Book Logo">
          </h1>
        </div>
        <div class="col-2">
          <a href="/myBooks" class="nav-link">My Books</a>
          </ul>
        </div>
      </div>
    </div>
  </header>

  <section>
    <div class="container">
      <div class="row mt-5">
        <div class="col-4">
          <form action="/search" id="myform" method="POST">
            <input type="search" id="mysearch" name="q"
              value="<%= typeof searchParam !== 'undefined' ? searchParam : '' %>">
            <button type="submit">Search</button>
          </form>
        </div>
      </div>
    </div>
  </section>

  <section class="container mt-5">
    <% if (typeof books !=='undefined' && books.length> 0) { %>
      <div class="row">
        <% books.forEach((book, index)=> { %>
          <div class="col-4 text-center mb-4">
            <img src="<%= book.coverImg %>" width="200" height="300" class="mb-2">
            <h5>
              <%= book.title %>
            </h5>
            <h6>
              <%= book.author %>
            </h6>
            <p>
              <%= book.year %>
            </p>
            <form class="addBook" action="/myBooks" method="POST">
             <input type="hidden" name="title" value="<%= book.title %>">
             <input type="hidden" name="author" value="<%= book.author %>">
             <input type="hidden" name="year" value="<%= book.year %>">
             <button type="submit" class="btn btn-primary">Add for reading</button>
            </form>
          </div>

          <% if ((index + 1) % 3===0 && index + 1 !==books.length) { %>
      </div>
      <div class="row">
        <% } %>
          <% }); %>
      </div>
      <% } else { %>
        <div class="text-center mt-5">
          <p>No books to display. Try searching for something above.</p>
        </div>
        <% } %>

          <% if (typeof currentPage !=='undefined' && totalPages> 1) { %>
            <div class="container mt-4 mb-5 text-center">
              <form action="/search" method="POST" class="d-inline">
                <input type="hidden" name="q" value="<%= searchParam %>">
                <input type="hidden" name="page" value="<%= currentPage - 1 %>">
                <button type="submit" class="btn btn-secondary" <%=currentPage===1 ? 'disabled' : '' %>>
                  &laquo; Previous
                </button>
              </form>

              <span class="mx-3">Page <%= currentPage %> of <%= totalPages %></span>

              <form action="/search" method="POST" class="d-inline">
                <input type="hidden" name="q" value="<%= searchParam %>">
                <input type="hidden" name="page" value="<%= currentPage + 1 %>">
                <button type="submit" class="btn btn-secondary" <%=currentPage===totalPages ? 'disabled' : '' %>>
                  Next &raquo;
                </button>
              </form>
            </div>
            <% } %>
  </section>

  <footer>
    <div class="container myfooter mt-5 mb-5 p-2">
      <div class="row d-flex align-items-center">
        <div class="col-10">
          <p>
            <%= new Date().getFullYear(); %>
          </p>
        </div>
        <div class="col-2">
          <a href="/" class="nav-link">Back to top</a>
          </ul>
        </div>
      </div>
    </div>
  </footer>


</body>

</html>